{
  // ===== Kotlin & Android =====
  "kotlin.languageServer.enabled": true,
  "kotlin.compiler.jvm.target": "17",
  "kotlin.debugAdapter.enabled": true,
  
  // Kotlin Language Server Memory Limits (prevent OOM crashes)
  "kotlin.languageServer.jvmOptions": [
    "-Xmx768m",
    "-Xms128m",
    "-XX:+UseG1GC",
    "-XX:MaxMetaspaceSize=256m",
    "-XX:+HeapDumpOnOutOfMemoryError",
    "-XX:HeapDumpPath=/tmp/kotlin-ls-oom.hprof"
  ],
  "kotlin.compiler.noStdlib": false,
  "kotlin.compiler.noReflect": false,
  
  // ===== Java =====
  "java.configuration.runtimes": [
    {
      "name": "JavaSE-21",
      "path": "/usr/local/sdkman/candidates/java/21.0.9-ms",
      "default": true
    }
  ],
  "java.jdt.ls.java.home": "/usr/local/sdkman/candidates/java/21.0.9-ms",
  
  // Java Language Server Memory Limits (optimized for 8GB Codespaces)
  "java.jdt.ls.vmargs": "-XX:+UseG1GC -XX:+UseStringDeduplication -Xms256m -Xmx1024m -XX:MaxMetaspaceSize=256m -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90 -Dsun.zip.disableMemoryMapping=true -Djava.awt.headless=true -Djava.util.concurrent.ForkJoinPool.common.parallelism=2",
  "java.import.gradle.java.home": "/usr/local/sdkman/candidates/java/21.0.9-ms",
  "java.import.gradle.wrapper.enabled": true,
  "java.import.gradle.offline.enabled": false,
  "java.autobuild.enabled": false,
  "java.maxConcurrentBuilds": 1,
  "java.completion.guessMethodArguments": false,
  "java.refactor.renameFromFileExplorer": "never",
  "java.codeGeneration.hashCodeEquals.useJava7Objects": true,
  
  // ===== Android =====
  "android.sdk": "${workspaceFolder}/.wsl-android-sdk",
  "android.gradle.path": "${workspaceFolder}/gradlew",
  "android.emulator.path": "${workspaceFolder}/.wsl-android-sdk/emulator/emulator",
  
  // ===== Code Formatting =====
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.organizeImports": "explicit",
    "source.fixAll": "explicit"
  },
  "[kotlin]": {
    "editor.defaultFormatter": "fwcd.kotlin",
    "editor.tabSize": 4,
    "editor.insertSpaces": true,
    "editor.formatOnSave": true
  },
  "[java]": {
    "editor.defaultFormatter": "redhat.java",
    "editor.tabSize": 4
  },
  "[xml]": {
    "editor.tabSize": 2
  },
  "[json]": {
    "editor.defaultFormatter": "vscode.json-language-features",
    "editor.tabSize": 2
  },
  "[gradle]": {
    "editor.tabSize": 4
  },
  
  // ===== Linting & Quality =====
  "ktlint.enable": true,
  "ktlint.autoFormat": true,
  "ktlint.lintAfterCreate": true,
  "detekt.enable": true,
  "detekt.configPath": "${workspaceFolder}/detekt-config.yml",
  
  // ===== Git =====
  "git.enableSmartCommit": true,
  "git.confirmSync": false,
  "git.autofetch": true,
  "git.pruneOnFetch": true,
  
  // ===== Files =====
  "files.exclude": {
    "**/.gradle": true,
    "**/.idea": true,
    "**/build": true,
    "**/*.iml": true,
    "**/.DS_Store": true,
    "**/local.properties": true
  },
  "files.watcherExclude": {
    "**/.gradle/**": true,
    "**/.idea/**": true,
    "**/build/**": true,
    "**/.wsl-*/**": true
  },
  "search.exclude": {
    "**/.gradle": true,
    "**/.idea": true,
    "**/build": true,
    "**/.wsl-*": true
  },
  
  // ===== Terminal =====
  "terminal.integrated.defaultProfile.linux": "bash",
  "terminal.integrated.env.linux": {
    "ANDROID_SDK_ROOT": "${workspaceFolder}/.wsl-android-sdk",
    "ANDROID_NDK_HOME": "${workspaceFolder}/.wsl-android-sdk/ndk/26.1.10909125",
    "JAVA_HOME": "/usr/local/sdkman/candidates/java/21.0.9-ms",
    "GRADLE_USER_HOME": "${workspaceFolder}/.wsl-gradle",
    "GRADLE_OPTS": "-Xmx1536m -Xms256m -XX:+UseG1GC -XX:MaxMetaspaceSize=384m -Dorg.gradle.daemon.idletimeout=300000 -Dorg.gradle.jvmargs=-Xmx1536m",
    "_JAVA_OPTIONS": "-Xmx1536m -Xms256m",
    "PATH": "${workspaceFolder}/.wsl-cmake/bin:${workspaceFolder}/.wsl-gperf:/usr/local/sdkman/candidates/java/21.0.9-ms/bin:${workspaceFolder}/.wsl-android-sdk/cmdline-tools/latest/bin:${workspaceFolder}/.wsl-android-sdk/platform-tools:${workspaceFolder}/.wsl-android-sdk/emulator:${env:PATH}"
  },
  
  // ===== Editor =====
  "editor.minimap.enabled": true,
  "editor.rulers": [120],
  "editor.wordWrap": "off",
  "editor.bracketPairColorization.enabled": true,
  "editor.guides.bracketPairs": true,
  "editor.suggestSelection": "first",
  "editor.inlineSuggest.enabled": true,
  
  // ===== Compose =====
  "compose.preview.enabled": true,
  
  // ===== Performance & Memory Optimization =====
  "files.maxMemoryForLargeFilesMB": 4096,
  "search.maxResults": 10000,
  "search.followSymlinks": false,
  "search.smartCase": true,
  "typescript.tsserver.maxTsServerMemory": 1024,
  "typescript.disableAutomaticTypeAcquisition": true,
  
  // Disable memory-intensive features
  "editor.occurrencesHighlight": "off",
  "editor.selectionHighlight": false,
  "editor.wordBasedSuggestions": "off",
  "editor.wordBasedSuggestionsMode": "currentDocument",
  "editor.gotoLocation.multipleDefinitions": "goto",
  "editor.gotoLocation.multipleImplementations": "goto",
  "problems.decorations.enabled": true,
  
  // Git performance
  "git.decorations.enabled": true,
  "git.untrackedChanges": "hidden",
  "git.ignoreLimitWarning": true,
  
  // Extension host limits
  "extensions.autoUpdate": false,
  "extensions.autoCheckUpdates": false,
  "update.mode": "none",
  
  // ===== Tasks =====
  "task.autoDetect": "on",
  "task.problemMatchers": [],
  
  // ===== Extensions =====
  "extensions.ignoreRecommendations": false
}

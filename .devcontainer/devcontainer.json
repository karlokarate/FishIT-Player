{
  "name": "FishIT-Player Android Development",
  "image": "mcr.microsoft.com/devcontainers/java:21",
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "moby": false
    },
    "ghcr.io/devcontainers/features/node:1": {
      "version": "20"
    },
    "ghcr.io/devcontainers/features/python:1": {
      "version": "latest",
      "installJupyterlab": true
    }
  },
  "forwardPorts": [
    8888
  ],
  "portsAttributes": {
    "8888": {
      "label": "JupyterLab",
      "protocol": "http",
      "onAutoForward": "notify",
      "elevateIfNeeded": true
    }
  },
  "postCreateCommand": "bash .devcontainer/post-create.sh",
  "postStartCommand": "bash .devcontainer/post-start.sh && bash .devcontainer/postStartImportTdlibSession.sh && nohup jupyter lab --ip=0.0.0.0 --port=8888 --no-browser --allow-root > /tmp/jupyter.log 2>&1 &",
  "customizations": {
    "vscode": {
      "extensions": [
        "GitHub.copilot",
        "GitHub.copilot-chat",
        "ms-python.python",
        "ms-toolsai.jupyter",
        "ms-toolsai.jupyter-keymap",
        "ms-toolsai.jupyter-renderers"
      ],
      "settings": {
        "java.configuration.runtimes": [
          {
            "name": "JavaSE-21",
            "path": "/usr/lib/jvm/msopenjdk-current",
            "default": true
          }
        ],
        "github.copilot.chat.mcp.enabled": true,
        "mcp": {
          "servers": {
            "github": {
              "command": "docker",
              "args": [
                "run",
                "-i",
                "--rm",
                "-e",
                "GITHUB_PERSONAL_ACCESS_TOKEN",
                "ghcr.io/github/github-mcp-server"
              ],
              "env": {
                "GITHUB_PERSONAL_ACCESS_TOKEN": "${localEnv:GITHUB_TOKEN}"
              }
            },
            "sequential-thinking": {
              "command": "npx",
              "args": [
                "-y",
                "@modelcontextprotocol/server-sequential-thinking"
              ]
            },
            "scope-guard": {
              "command": "node",
              "args": [
                "${containerWorkspaceFolder}/tools/scope-guard-mcp/dist/index.js"
              ],
              "env": {
                "WORKSPACE_ROOT": "${containerWorkspaceFolder}"
              }
            }
          }
        }
      }
    }
  },
  "remoteEnv": {
    "JAVA_HOME": "/usr/lib/jvm/msopenjdk-current",
    "ANDROID_HOME": "/home/vscode/.android-sdk",
    "ANDROID_SDK_ROOT": "/home/vscode/.android-sdk",
    "PATH": "${containerEnv:PATH}:/home/vscode/.android-sdk/cmdline-tools/latest/bin:/home/vscode/.android-sdk/platform-tools"
  }
}